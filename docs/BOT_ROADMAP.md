# ü§ñ Telegram Bot Development Roadmap

## ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞
- **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** –∞–¥–º–∏–Ω—Å–∫–∏–π —Å—Ç–∞—Ç—É—Å –¥–ª—è nata@martsinkevich.ru (role: admin, credits: 505)
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥** –≤ –±–æ—Ç–µ, –∫–æ—Ç–æ—Ä—ã–π —Å–±—Ä–∞—Å—ã–≤–∞–ª role –∏ credits –ø—Ä–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ–∏—Å–∫–∞ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–≤–∏—Ç–∏—è

### 1. –†–∞—Å—Å—ã–ª–∫–∏ —Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π
### 2. –û—Ç–ø—Ä–∞–≤–∫–∞ –≥–æ—Ç–æ–≤–æ–π —Ä–∞–±–æ—Ç—ã –≤ Telegram
### 3. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞
### 4. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

---

## üìã ROADMAP: –î–µ—Ç–∞–ª—å–Ω—ã–π –ø–ª–∞–Ω –∑–∞–¥–∞—á

---

## üéØ MILESTONE 1: –†–∞—Å—Å—ã–ª–∫–∏ —Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–µ–π (2 –Ω–µ–¥–µ–ª–∏)

### –°–ø—Ä–∏–Ω—Ç 1.1: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (3-4 –¥–Ω—è)

#### Task 1.1.1: –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

```sql
-- –¢–∞–±–ª–∏—Ü–∞ —Ä–∞—Å—Å—ã–ª–æ–∫
CREATE TABLE broadcasts (
    id UUID PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    message_text TEXT NOT NULL,
    message_html TEXT,
    segments JSONB,  -- –§–∏–ª—å—Ç—Ä—ã —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏
    status VARCHAR(50) DEFAULT 'draft',  -- draft, scheduled, sending, completed, failed
    scheduled_at TIMESTAMP,
    started_at TIMESTAMP,
    completed_at TIMESTAMP,
    total_recipients INTEGER DEFAULT 0,
    sent_count INTEGER DEFAULT 0,
    delivered_count INTEGER DEFAULT 0,
    failed_count INTEGER DEFAULT 0,
    created_by UUID REFERENCES users(id),
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π —Ä–∞—Å—Å—ã–ª–∫–∏
CREATE TABLE broadcast_recipients (
    id UUID PRIMARY KEY,
    broadcast_id UUID REFERENCES broadcasts(id) ON DELETE CASCADE,
    user_id UUID REFERENCES users(id),
    status VARCHAR(50) DEFAULT 'pending',  -- pending, sent, delivered, failed, read
    sent_at TIMESTAMP,
    delivered_at TIMESTAMP,
    read_at TIMESTAMP,
    error_message TEXT,
    created_at TIMESTAMP DEFAULT NOW()
);

-- –ò–Ω–¥–µ–∫—Å—ã
CREATE INDEX idx_broadcasts_status ON broadcasts(status);
CREATE INDEX idx_broadcasts_scheduled ON broadcasts(scheduled_at);
CREATE INDEX idx_broadcast_recipients_status ON broadcast_recipients(broadcast_id, status);
CREATE INDEX idx_broadcast_recipients_user ON broadcast_recipients(user_id);
```

**–§–∞–π–ª—ã:**
- `migrations/versions/xxx_add_broadcasts.py`
- `packages/database/src/models.py` (–¥–æ–±–∞–≤–∏—Ç—å Broadcast, BroadcastRecipient)

---

#### Task 1.1.2: –°–æ–∑–¥–∞—Ç—å —Å–µ—Ä–≤–∏—Å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Å—Ç–∞—Ç—É—Å—É –ø–æ–¥–ø–∏—Å–∫–∏ (FREE, ACTIVE, CANCELED, EXPIRED)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –±–∞–ª–∞–Ω—Å—É –∫—Ä–µ–¥–∏—Ç–æ–≤ (0, 1-5, 5-10, 10+)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ (–Ω–µ –∑–∞—Ö–æ–¥–∏–ª N –¥–Ω–µ–π)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –≥–µ–Ω–µ—Ä–∞—Ü–∏–π (0, 1-3, 3-10, 10+)
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–Ω–æ–≤–∏—á–∫–∏ < 7 –¥–Ω–µ–π, —Å—Ç–∞—Ä–∏—á–∫–∏)
- –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ç–µ–≥–∏ (beta-testers, vip, etc)

**–§–∞–π–ª—ã:**
- `apps/api/services/segmentation_service.py`

```python
class SegmentationService:
    @staticmethod
    def get_users_by_segments(segments: dict) -> List[User]:
        """
        –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º —Å–µ–≥–º–µ–Ω—Ç–∞–º.
        
        segments = {
            "subscription_status": ["FREE", "CANCELED"],
            "credits_balance": {"min": 0, "max": 5},
            "inactive_days": 7,
            "generations_count": {"min": 0, "max": 0},
            "registered_days": {"min": 0, "max": 7},
            "tags": ["beta-testers"]
        }
        """
        pass
    
    @staticmethod
    def count_users_by_segments(segments: dict) -> int:
        """–ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ —Å–µ–≥–º–µ–Ω—Ç–µ."""
        pass
    
    @staticmethod
    def preview_segment(segments: dict, limit: int = 10) -> List[User]:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–µ–≤—å—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏."""
        pass
```

---

#### Task 1.1.3: API endpoints –¥–ª—è —Ä–∞—Å—Å—ã–ª–æ–∫
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/routers/broadcasts.py`

```python
# POST /admin/broadcasts - —Å–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É
# GET /admin/broadcasts - —Å–ø–∏—Å–æ–∫ —Ä–∞—Å—Å—ã–ª–æ–∫
# GET /admin/broadcasts/{id} - –¥–µ—Ç–∞–ª–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
# PUT /admin/broadcasts/{id} - –æ–±–Ω–æ–≤–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É
# DELETE /admin/broadcasts/{id} - —É–¥–∞–ª–∏—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É
# POST /admin/broadcasts/{id}/schedule - –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
# POST /admin/broadcasts/{id}/send - –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ–π—á–∞—Å
# GET /admin/broadcasts/{id}/stats - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
# POST /admin/broadcasts/preview-segment - –ø—Ä–µ–≤—å—é —Å–µ–≥–º–µ–Ω—Ç–∞
```

---

### –°–ø—Ä–∏–Ω—Ç 1.2: –ê–¥–º–∏–Ω UI (3-4 –¥–Ω—è)

#### Task 1.2.1: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–ø–∏—Å–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `src/features/admin/pages/BroadcastsPage.tsx`
- `src/features/admin/components/BroadcastList.tsx`

**UI —ç–ª–µ–º–µ–Ω—Ç—ã:**
- –¢–∞–±–ª–∏—Ü–∞ —Å —Ä–∞—Å—Å—ã–ª–∫–∞–º–∏ (–Ω–∞–∑–≤–∞–Ω–∏–µ, —Å—Ç–∞—Ç—É—Å, –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π, –¥–∞—Ç–∞)
- –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É"
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é

---

#### Task 1.2.2: –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–∞—Å—Å—ã–ª–∫–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 6 —á–∞—Å–æ–≤

**–§–∞–π–ª—ã:**
- `src/features/admin/components/BroadcastForm.tsx`
- `src/features/admin/components/SegmentSelector.tsx`

**UI —ç–ª–µ–º–µ–Ω—Ç—ã:**
1. **–®–∞–≥ 1: –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è**
   - Textarea –¥–ª—è —Ç–µ–∫—Å—Ç–∞
   - –ü—Ä–µ–≤—å—é —Å —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º
   - –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: `{name}`, `{balance}`, `{email}`
   - Markdown –ø–æ–¥–¥–µ—Ä–∂–∫–∞

2. **–®–∞–≥ 2: –í—ã–±–æ—Ä —Å–µ–≥–º–µ–Ω—Ç–æ–≤**
   - –ß–µ–∫–±–æ–∫—Å—ã –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–æ–¥–ø–∏—Å–∫–∏
   - –°–ª–∞–π–¥–µ—Ä—ã –¥–ª—è –±–∞–ª–∞–Ω—Å–∞ –∫—Ä–µ–¥–∏—Ç–æ–≤
   - –ò–Ω–ø—É—Ç –¥–ª—è –¥–Ω–µ–π –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
   - –°—á–µ—Ç—á–∏–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π (live update)
   - –ö–Ω–æ–ø–∫–∞ "–ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–≤—å—é" (10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

3. **–®–∞–≥ 3: –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**
   - Radio: –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–µ–π—á–∞—Å / –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å
   - DateTimePicker –¥–ª—è –æ—Ç–ª–æ–∂–µ–Ω–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
   - –ö–Ω–æ–ø–∫–∞ "–°–æ–∑–¥–∞—Ç—å —Ä–∞—Å—Å—ã–ª–∫—É"

---

#### Task 1.2.3: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Ä–∞—Å—Å—ã–ª–∫–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `src/features/admin/pages/BroadcastStatsPage.tsx`

**UI —ç–ª–µ–º–µ–Ω—Ç—ã:**
- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ/–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–æ/–ø—Ä–æ—á–∏—Ç–∞–Ω–æ)
- –ì—Ä–∞—Ñ–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤–æ –≤—Ä–µ–º–µ–Ω–∏
- –°–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π —Å —Å—Ç–∞—Ç—É—Å–∞–º–∏
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É –¥–æ—Å—Ç–∞–≤–∫–∏

---

### –°–ø—Ä–∏–Ω—Ç 1.3: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫ (3-4 –¥–Ω—è)

#### Task 1.3.1: –§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/services/broadcast_service.py`

```python
class BroadcastService:
    @staticmethod
    async def send_broadcast(broadcast_id: UUID):
        """
        –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å—Å—ã–ª–∫—É –≤—Å–µ–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è–º.
        - –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–ª—É—á–∞—Ç–µ–ª–µ–π
        - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å rate limiting (20 msg/sec)
        - –û–±–Ω–æ–≤–ª—è–µ—Ç —Å—Ç–∞—Ç—É—Å—ã
        - –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –æ—à–∏–±–∫–∏
        """
        pass
    
    @staticmethod
    async def send_message_to_user(user: User, message: str):
        """–û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–¥–Ω–æ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é."""
        pass
    
    @staticmethod
    def schedule_broadcast(broadcast_id: UUID, scheduled_at: datetime):
        """–ü–ª–∞–Ω–∏—Ä—É–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Ä–∞—Å—Å—ã–ª–∫–∏."""
        pass
```

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- APScheduler –¥–ª—è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è
- asyncio –¥–ª—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏
- Rate limiting (20 —Å–æ–æ–±—â–µ–Ω–∏–π/—Å–µ–∫ –¥–ª—è Telegram)

---

#### Task 1.3.2: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ –¥–æ—Å—Ç–∞–≤–∫–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –¥–æ—Å—Ç–∞–≤–∫–∏ —á–µ—Ä–µ–∑ Telegram API
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–≤ –≤ –ë–î
- Retry –¥–ª—è failed —Å–æ–æ–±—â–µ–Ω–∏–π (3 –ø–æ–ø—ã—Ç–∫–∏)
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

---

#### Task 1.3.3: –®–∞–±–ª–æ–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏–π
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/services/template_service.py`

**–®–∞–±–ª–æ–Ω—ã:**
- "–í–æ–∑–≤—Ä–∞—â–∞–π—Ç–µ—Å—å! üéÅ" (–¥–ª—è –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã—Ö)
- "–ü–æ–¥–ø–∏—Å–∫–∞ –∏—Å—Ç–µ–∫–∞–µ—Ç ‚è∞" (–∑–∞ 3 –¥–Ω—è –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è)
- "–ü–æ–ø–æ–ª–Ω–∏—Ç–µ –±–∞–ª–∞–Ω—Å üí≥" (–¥–ª—è –Ω—É–ª–µ–≤–æ–≥–æ –±–∞–ª–∞–Ω—Å–∞)
- "–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è! üöÄ" (–¥–ª—è –∞–Ω–æ–Ω—Å–æ–≤)

---

## üéØ MILESTONE 2: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç—ã –≤ Telegram (1 –Ω–µ–¥–µ–ª—è)

### –°–ø—Ä–∏–Ω—Ç 2.1: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ (2-3 –¥–Ω—è)

#### Task 2.1.1: Webhook –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/routers/bot_webhooks.py`

```python
# POST /bot/notify/generation-started
# POST /bot/notify/generation-progress
# POST /bot/notify/generation-completed
# POST /bot/notify/generation-failed
```

**Payload:**
```json
{
  "user_id": "uuid",
  "generation_id": "uuid",
  "status": "COMPLETED",
  "progress": 100,
  "work_type": "essay",
  "topic": "–ò—Å—Ç–æ—Ä–∏—è –î—Ä–µ–≤–Ω–µ–≥–æ –†–∏–º–∞",
  "file_url": "https://..."
}
```

---

#### Task 2.1.2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å GenerationService
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/services/generation_service.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–∏ —Å–º–µ–Ω–µ —Å—Ç–∞—Ç—É—Å–∞ –Ω–∞ RUNNING ‚Üí –≤—ã–∑–≤–∞—Ç—å webhook
- –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–∫–∞–∂–¥—ã–µ 25%) ‚Üí –≤—ã–∑–≤–∞—Ç—å webhook
- –ü—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ (COMPLETED) ‚Üí –≤—ã–∑–≤–∞—Ç—å webhook —Å file_url
- –ü—Ä–∏ –æ—à–∏–±–∫–µ (FAILED) ‚Üí –≤—ã–∑–≤–∞—Ç—å webhook

---

#### Task 2.1.3: –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –±–æ—Ç–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/bot/handlers/notifications.py`

```python
async def notify_generation_started(user_id: UUID, generation_id: UUID, topic: str):
    """üü° –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞–ª–∞—Å—å"""
    pass

async def notify_generation_progress(user_id: UUID, progress: int):
    """üîµ –ü—Ä–æ–≥—Ä–µ—Å—Å: 25%, 50%, 75%"""
    pass

async def notify_generation_completed(user_id: UUID, generation_id: UUID, file_url: str):
    """üü¢ –ì–æ—Ç–æ–≤–æ! + –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞"""
    pass

async def notify_generation_failed(user_id: UUID, error: str):
    """üî¥ –û—à–∏–±–∫–∞ + –∫–Ω–æ–ø–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏"""
    pass
```

---

### –°–ø—Ä–∏–Ω—Ç 2.2: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤ (2-3 –¥–Ω—è)

#### Task 2.2.1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/services/file_service.py`

```python
class FileService:
    @staticmethod
    def generate_download_link(generation_id: UUID, expires_in: int = 3600) -> str:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –Ω–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ.
        –°—Å—ã–ª–∫–∞ –¥–µ–π—Å—Ç–≤—É–µ—Ç 1 —á–∞—Å.
        """
        pass
    
    @staticmethod
    def validate_download_token(token: str) -> Optional[UUID]:
        """–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç generation_id."""
        pass
```

---

#### Task 2.2.2: –û—Ç–ø—Ä–∞–≤–∫–∞ .docx —Ñ–∞–π–ª–æ–≤ –≤ Telegram
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/bot/handlers/files.py`

```python
async def send_generation_file(user_id: UUID, generation_id: UUID, file_url: str):
    """
    –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–∞–π–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:
    1. –°–∫–∞—á–∏–≤–∞–µ—Ç —Ñ–∞–π–ª –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Å—ã–ª–∫–µ
    2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–∫ document –≤ Telegram
    3. –î–æ–±–∞–≤–ª—è–µ—Ç inline –∫–Ω–æ–ø–∫–∏:
       - "–û—Ç–∫—Ä—ã—Ç—å –Ω–∞ —Å–∞–π—Ç–µ"
       - "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
       - "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é —Ä–∞–±–æ—Ç—É"
    """
    pass
```

**–û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö —Ñ–∞–π–ª–æ–≤:**
- –ï—Å–ª–∏ —Ñ–∞–π–ª > 50MB ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —Å—Å—ã–ª–∫—É
- –ï—Å–ª–∏ —Ñ–∞–π–ª < 50MB ‚Üí –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–∞–∫ document

---

#### Task 2.2.3: –ü—Ä–µ–≤—å—é —Ä–∞–±–æ—Ç—ã
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û—Ç–ø—Ä–∞–≤–∫–∞ –ø–µ—Ä–≤—ã—Ö 3 –∞–±–∑–∞—Ü–µ–≤ —Ä–∞–±–æ—Ç—ã –∫–∞–∫ —Ç–µ–∫—Å—Ç
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –æ–±—ä–µ–º, –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤
- Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π

---

## üéØ MILESTONE 3: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ (1 –Ω–µ–¥–µ–ª—è)

### –°–ø—Ä–∏–Ω—Ç 3.1: –ö–æ–º–∞–Ω–¥—ã –∏ UI (2-3 –¥–Ω—è)

#### Task 3.1.1: –ö–æ–º–∞–Ω–¥–∞ /referral
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/bot/handlers/referral.py`

```python
@dp.message(Command("referral"))
async def referral_handler(message: Message):
    """
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:
    - –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞
    - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π
    - –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ –∫—Ä–µ–¥–∏—Ç—ã
    - –£—Å–ª–æ–≤–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã
    """
    user = get_user_by_telegram_id(message.from_user.id)
    
    referral_link = f"https://zachet.tech?ref={user.referral_code}"
    friends_count = user.referrals_count
    earned_credits = friends_count  # 1 –¥—Ä—É–≥ = 1 –∫—Ä–µ–¥–∏—Ç
    
    await message.answer(
        f"üéÅ <b>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</b>\n\n"
        f"–ü—Ä–∏–≥–ª–∞—à–∞–π –¥—Ä—É–∑–µ–π –∏ –ø–æ–ª—É—á–∞–π –∫—Ä–µ–¥–∏—Ç—ã!\n\n"
        f"üë• –ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ –¥—Ä—É–∑–µ–π: {friends_count}\n"
        f"üíé –ó–∞—Ä–∞–±–æ—Ç–∞–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤: {earned_credits}\n\n"
        f"üîó –¢–≤–æ—è —Å—Å—ã–ª–∫–∞:\n"
        f"<code>{referral_link}</code>\n\n"
        f"üìã –£—Å–ª–æ–≤–∏—è:\n"
        f"‚Ä¢ 1 –¥—Ä—É–≥ = 1 –∫—Ä–µ–¥–∏—Ç\n"
        f"‚Ä¢ –î—Ä—É–≥ –¥–æ–ª–∂–µ–Ω —Å–æ–∑–¥–∞—Ç—å —Ö–æ—Ç—è –±—ã 1 —Ä–∞–±–æ—Ç—É\n"
        f"‚Ä¢ –ö—Ä–µ–¥–∏—Ç—ã –Ω–∞—á–∏—Å–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏",
        reply_markup=share_keyboard(referral_link)
    )
```

---

#### Task 3.1.2: Inline –∫–Ω–æ–ø–∫–∏ –¥–ª—è —à–∞—Ä–∏–Ω–≥–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 1 —á–∞—Å

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è —Å—Å—ã–ª–∫–æ–π" (Telegram share)
- –ö–Ω–æ–ø–∫–∞ "–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É"
- –ö–Ω–æ–ø–∫–∞ "–ú–æ–∏ —Ä–µ—Ñ–µ—Ä–∞–ª—ã" (—Å–ø–∏—Å–æ–∫)

---

#### Task 3.1.3: –°–ø–∏—Å–æ–∫ —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π
- –°—Ç–∞—Ç—É—Å –∫–∞–∂–¥–æ–≥–æ (–∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω, —Å–æ–∑–¥–∞–ª —Ä–∞–±–æ—Ç—É, –∞–∫—Ç–∏–≤–µ–Ω)
- –î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

---

### –°–ø—Ä–∏–Ω—Ç 3.2: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ (1-2 –¥–Ω—è)

#### Task 3.2.1: Webhook –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–æ–π —Å—Å—ã–ª–∫–µ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/routers/auth.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å `ref` –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ URL
- –°–æ—Ö—Ä–∞–Ω—è—Ç—å `referred_by` –≤ —Ç–∞–±–ª–∏—Ü–µ users
- –£–≤–µ–ª–∏—á–∏–≤–∞—Ç—å `referrals_count` —É —Ä–µ—Ñ–µ—Ä–µ—Ä–∞

---

#### Task 3.2.2: –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –∫—Ä–µ–¥–∏—Ç–æ–≤ –ø—Ä–∏ –ø–µ—Ä–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/api/services/generation_service.py`

**–õ–æ–≥–∏–∫–∞:**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø–µ—Ä–≤–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –µ—Å—Ç—å –ª–∏ `referred_by`
- –ù–∞—á–∏—Å–ª–∏—Ç—å 1 –∫—Ä–µ–¥–∏—Ç —Ä–µ—Ñ–µ—Ä–µ—Ä—É
- –°–æ–∑–¥–∞—Ç—å CreditTransaction
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram —Ä–µ—Ñ–µ—Ä–µ—Ä—É

---

#### Task 3.2.3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–∏
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 1 —á–∞—Å

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Ä–µ—Ñ–µ—Ä–µ—Ä—É: "üéâ –í–∞—à –¥—Ä—É–≥ —Å–æ–∑–¥–∞–ª –ø–µ—Ä–≤—É—é —Ä–∞–±–æ—Ç—É! +1 –∫—Ä–µ–¥–∏—Ç"

---

### –°–ø—Ä–∏–Ω—Ç 3.3: –õ–∏–¥–µ—Ä–±–æ—Ä–¥ (1 –¥–µ–Ω—å)

#### Task 3.3.1: –ö–æ–º–∞–Ω–¥–∞ /leaderboard
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P2  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –¢–æ–ø-10 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —Ä–µ—Ñ–µ—Ä–∞–ª–æ–≤
- –ü–æ–∑–∏—Ü–∏—è —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü—Ä–∏–∑—ã –¥–ª—è —Ç–æ–ø-3 (–±–µ–π–¥–∂–∏, –±–æ–Ω—É—Å—ã)

---

## üéØ MILESTONE 4: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ (1 –Ω–µ–¥–µ–ª—è)

### –°–ø—Ä–∏–Ω—Ç 4.1: FAQ –∏ –±–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ (2-3 –¥–Ω—è)

#### Task 4.1.1: –ö–æ–º–∞–Ω–¥–∞ /help —Å FAQ
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/bot/handlers/support.py`

```python
@dp.message(Command("help"))
async def help_handler(message: Message):
    """
    –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç FAQ —Å inline –∫–Ω–æ–ø–∫–∞–º–∏:
    - –ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —Ä–∞–±–æ—Ç—É?
    - –ö–∞–∫ –∫—É–ø–∏—Ç—å –∫—Ä–µ–¥–∏—Ç—ã?
    - –ß—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–¥–ø–∏—Å–∫–∞?
    - –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ä–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞?
    - –°–≤—è–∑–∞—Ç—å—Å—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
    """
    pass
```

**Inline –∫–Ω–æ–ø–∫–∏:**
- –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç callback —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ—Ç–≤–µ—Ç–æ–º
- –ö–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ –∫ —Å–ø–∏—Å–∫—É

---

#### Task 4.1.2: –ö–æ–º–∞–Ω–¥–∞ /support –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∏–∫–µ—Ç–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–§–∞–π–ª—ã:**
- `apps/bot/handlers/support.py`
- `packages/database/src/models.py` (–¥–æ–±–∞–≤–∏—Ç—å SupportTicket)

```python
@dp.message(Command("support"))
async def support_handler(message: Message, state: FSMContext):
    """
    –°–æ–∑–¥–∞–µ—Ç —Ç–∏–∫–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏:
    1. –°–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é (–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, –û–ø–ª–∞—Ç–∞, –î—Ä—É–≥–æ–µ)
    2. –ü—Ä–æ—Å–∏—Ç –æ–ø–∏—Å–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É
    3. –°–æ–∑–¥–∞–µ—Ç —Ç–∏–∫–µ—Ç –≤ –ë–î
    4. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É
    5. –î–∞–µ—Ç –Ω–æ–º–µ—Ä —Ç–∏–∫–µ—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    """
    pass
```

**–¢–∞–±–ª–∏—Ü–∞:**
```sql
CREATE TABLE support_tickets (
    id UUID PRIMARY KEY,
    user_id UUID REFERENCES users(id),
    category VARCHAR(50),
    message TEXT,
    status VARCHAR(50) DEFAULT 'open',  -- open, in_progress, resolved, closed
    created_at TIMESTAMP DEFAULT NOW(),
    resolved_at TIMESTAMP
);
```

---

#### Task 4.1.3: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω—É –æ –Ω–æ–≤—ã—Ö —Ç–∏–∫–µ—Ç–∞—Ö
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Ç–∏–∫–µ—Ç–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –∞–¥–º–∏–Ω—É (nata@martsinkevich.ru)
- Inline –∫–Ω–æ–ø–∫–∏: "–û—Ç–≤–µ—Ç–∏—Ç—å", "–ó–∞–∫—Ä—ã—Ç—å —Ç–∏–∫–µ—Ç"
- –ü–æ–∫–∞–∑–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ

---

### –°–ø—Ä–∏–Ω—Ç 4.2: –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–∏–∫–µ—Ç—ã (2 –¥–Ω—è)

#### Task 4.2.1: –ü–µ—Ä–µ—Å—ã–ª–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –∞–¥–º–∏–Ω—É
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 3 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –∞–∫—Ç–∏–≤–Ω—ã–º —Ç–∏–∫–µ—Ç–æ–º –ø–µ—Ä–µ—Å—ã–ª–∞—é—Ç—Å—è –∞–¥–º–∏–Ω—É
- –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –æ—Ç–≤–µ—Ç–∏—Ç—å —á–µ—Ä–µ–∑ reply
- –û—Ç–≤–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

#### Task 4.2.2: –ö–æ–º–∞–Ω–¥–∞ /tickets –¥–ª—è –∞–¥–º–∏–Ω–∞
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1  
**–í—Ä–µ–º—è:** 2 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –æ—Ç–∫—Ä—ã—Ç—ã—Ö —Ç–∏–∫–µ—Ç–æ–≤
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Å—Ç–∞—Ç—É—Å—É
- –ö–Ω–æ–ø–∫–∏ –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π

---

### –°–ø—Ä–∏–Ω—Ç 4.3: AI –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 2-3 –¥–Ω—è)

#### Task 4.3.1: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å AI –¥–ª—è –∞–≤—Ç–æ–æ—Ç–≤–µ—Ç–æ–≤
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P2  
**–í—Ä–µ–º—è:** 4 —á–∞—Å–∞

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ê–Ω–∞–ª–∏–∑ –≤–æ–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ GPT
- –ü–æ–∏—Å–∫ –æ—Ç–≤–µ—Ç–∞ –≤ –±–∞–∑–µ –∑–Ω–∞–Ω–∏–π
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç–≤–µ—Ç –¥–ª—è –ø—Ä–æ—Å—Ç—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤
- –≠—Å–∫–∞–ª–∞—Ü–∏—è —Å–ª–æ–∂–Ω—ã—Ö –≤–æ–ø—Ä–æ—Å–æ–≤ –∞–¥–º–∏–Ω—É

---

## üìä –ò—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞ –≤—Ä–µ–º–µ–Ω–∏

| Milestone | –°–ø—Ä–∏–Ω—Ç—ã | –í—Ä–µ–º—è | –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç |
|-----------|---------|-------|-----------|
| 1. –†–∞—Å—Å—ã–ª–∫–∏ | 3 —Å–ø—Ä–∏–Ω—Ç–∞ | 10-12 –¥–Ω–µ–π | P0 |
| 2. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç | 2 —Å–ø—Ä–∏–Ω—Ç–∞ | 5-6 –¥–Ω–µ–π | P0 |
| 3. –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ | 3 —Å–ø—Ä–∏–Ω—Ç–∞ | 5-6 –¥–Ω–µ–π | P1 |
| 4. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ | 3 —Å–ø—Ä–∏–Ω—Ç–∞ | 6-8 –¥–Ω–µ–π | P1 |
| **–ò–¢–û–ì–û** | **11 —Å–ø—Ä–∏–Ω—Ç–æ–≤** | **26-32 –¥–Ω—è** | |

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ—Ä—è–¥–æ–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ù–µ–¥–µ–ª—è 1-2: –†–∞—Å—Å—ã–ª–∫–∏ (P0)
1. –î–µ–Ω—å 1-2: –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (—Ç–∞–±–ª–∏—Ü—ã, —Å–µ—Ä–≤–∏—Å—ã, API)
2. –î–µ–Ω—å 3-5: –ê–¥–º–∏–Ω UI (—Å–ø–∏—Å–æ–∫, —Ñ–æ—Ä–º–∞, —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
3. –î–µ–Ω—å 6-8: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞—Å—Å—ã–ª–æ–∫ (—Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏, rate limiting)
4. –î–µ–Ω—å 9-10: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ñ–∏–∫—Å –±–∞–≥–æ–≤

### –ù–µ–¥–µ–ª—è 3: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç (P0)
1. –î–µ–Ω—å 1-2: –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å—Ç–∞—Ç—É—Å–µ
2. –î–µ–Ω—å 3-4: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–æ–≤
3. –î–µ–Ω—å 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ–¥–µ–ª—è 4: –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ (P1)
1. –î–µ–Ω—å 1-2: –ö–æ–º–∞–Ω–¥—ã –∏ UI
2. –î–µ–Ω—å 3-4: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ
3. –î–µ–Ω—å 5: –õ–∏–¥–µ—Ä–±–æ—Ä–¥ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ù–µ–¥–µ–ª—è 5: –ü–æ–¥–¥–µ—Ä–∂–∫–∞ (P1)
1. –î–µ–Ω—å 1-2: FAQ –∏ –±–∞–∑–æ–≤–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞
2. –î–µ–Ω—å 3-4: –û—Ç–≤–µ—Ç—ã –Ω–∞ —Ç–∏–∫–µ—Ç—ã
3. –î–µ–Ω—å 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üìà –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

### –†–∞—Å—Å—ã–ª–∫–∏:
- Open Rate > 40%
- Click Rate > 15%
- Retention D7 +20%

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–∞–±–æ—Ç:
- % –ø–æ–ª—É—á–∞—é—â–∏—Ö —Ä–∞–±–æ—Ç—É –≤ TG > 60%
- –í—Ä–µ–º—è –¥–æ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è < 5 –º–∏–Ω

### –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞:
- –ö–æ–Ω–≤–µ—Ä—Å–∏—è –≤ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é > 10%
- –°—Ä–µ–¥–Ω–∏–π K-factor > 1.2

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞:
- –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ < 1 —á–∞—Å
- –†–µ—à–µ–Ω–∏–µ —Ç–∏–∫–µ—Ç–∞ < 24 —á–∞—Å–∞
- –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å > 4.5/5

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend:
- FastAPI (API endpoints)
- SQLAlchemy (ORM)
- APScheduler (–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—Å—ã–ª–æ–∫)
- asyncio (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞)

### Bot:
- aiogram 3.x (Telegram Bot API)
- FSM –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤
- Redis –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π

### Frontend (Admin):
- React + TypeScript
- –ù–æ–≤—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ `/admin/broadcasts`
- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

---

## ‚ö†Ô∏è –†–∏—Å–∫–∏ –∏ –º–∏—Ç–∏–≥–∞—Ü–∏—è

### –†–∏—Å–∫ 1: Rate limiting Telegram
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –û—á–µ—Ä–µ–¥—å —Å–æ–æ–±—â–µ–Ω–∏–π, 20 msg/sec, retry –ª–æ–≥–∏–∫–∞

### –†–∏—Å–∫ 2: –ë–æ–ª—å—à–∏–µ —Ñ–∞–π–ª—ã (>50MB)
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –û—Ç–ø—Ä–∞–≤–∫–∞ —Å—Å—ã–ª–∫–∏ –≤–º–µ—Å—Ç–æ —Ñ–∞–π–ª–∞

### –†–∏—Å–∫ 3: –°–ø–∞–º –∂–∞–ª–æ–±—ã
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** Opt-out –∫–Ω–æ–ø–∫–∞, —á–∞—Å—Ç–æ—Ç–∞ —Ä–∞—Å—Å—ã–ª–æ–∫ –Ω–µ —á–∞—â–µ 1 —Ä–∞–∑ –≤ 3 –¥–Ω—è

### –†–∏—Å–∫ 4: –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ë–î
**–ú–∏—Ç–∏–≥–∞—Ü–∏—è:** –ò–Ω–¥–µ–∫—Å—ã, –ø–∞–≥–∏–Ω–∞—Ü–∏—è, –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–≥–º–µ–Ω—Ç–æ–≤

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥** —Å –ø–æ—Ç–µ—Ä–µ–π –∞–¥–º–∏–Ω—Å–∫–æ–≥–æ —Å—Ç–∞—Ç—É—Å–∞
2. ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω** nata@martsinkevich.ru (admin, 505 credits)
3. üîÑ **–ù–∞—á–∞—Ç—å —Å Milestone 1** (–†–∞—Å—Å—ã–ª–∫–∏) - —Å–∞–º—ã–π –≤—ã—Å–æ–∫–∏–π ROI
4. üìÖ **–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø—Ä–∏–Ω—Ç–æ–≤** - —Ä–∞–∑–±–∏—Ç—å –Ω–∞ 2-–Ω–µ–¥–µ–ª—å–Ω—ã–µ –∏—Ç–µ—Ä–∞—Ü–∏–∏

---

**–ì–æ—Ç–æ–≤ –Ω–∞—á–∞—Ç—å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫—É! –° —á–µ–≥–æ –Ω–∞—á–Ω–µ–º?** üöÄ
